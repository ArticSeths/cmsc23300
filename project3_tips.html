
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
<title>Project 3 Tips &mdash; CMSC 23300 - Networks and Distributed Systems</title>

    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.3.4/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/chiweb.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="CMSC 23300 - Networks and Distributed Systems" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          CMSC 23300 - Networks and Distributed Systems</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="syllabus.html">Syllabus</a></li>
                <li><a href="calendar.html">Course Calendar</a></li>
                <li><a href="resources.html">Additional Resources</a></li>
                <li><a href="projects.html">Projects</a></li>
            
            
              
              
            
            
            
            
            
          </ul>

          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
<div class="row">
    <div class="col-md-12">
        <ul class="breadcrumb">
          <li><a href="index.html">CMSC 23300 - Networks and Distributed Systems</a></li>
            <li class="active">Project 3 Tips</li>
        </ul>
    </div>
</div>

    <div class="col-md-12 content">
      
  <div class="section" id="project-3-tips">
<h1>Project 3 Tips<a class="headerlink" href="#project-3-tips" title="Permalink to this headline">¶</a></h1>
<div class="section" id="before-you-get-started">
<h2>Before you get started<a class="headerlink" href="#before-you-get-started" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Make sure you&#8217;ve read all the pages listed under &#8220;General&#8221; in the main <a class="reference external" href="projects.html">Projects</a>
page.</li>
<li>Double-check that your repository has a single <code class="docutils literal"><span class="pre">chirouter</span></code> directory in it, and that the chirouter
files are in that directory. If the chirouter files (<code class="docutils literal"><span class="pre">README.md</span></code>, <code class="docutils literal"><span class="pre">src/</span></code>, ...) are in the top
level of your repository, they will not be graded. Make sure you follow the exact instructions
in <a class="reference external" href="initial_code.html">Uploading the initial code to your repository</a>.</li>
</ul>
</div>
<div class="section" id="resetting-mininet">
<h2>Resetting Mininet<a class="headerlink" href="#resetting-mininet" title="Permalink to this headline">¶</a></h2>
<p>If, at any point, Mininet starts behaving in an unexpected manner, specially if you see the following error message
when running chirouter:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">CRITIC</span> <span class="n">Routing</span> <span class="n">table</span> <span class="n">included</span> <span class="n">interface</span> <span class="n">eth1</span><span class="p">,</span> <span class="n">but</span> <span class="n">received</span> <span class="n">no</span> <span class="n">such</span> <span class="n">interface</span> <span class="kn">from</span> <span class="nn">POX</span>
<span class="n">CRITIC</span> <span class="n">Error</span> <span class="k">while</span> <span class="n">processing</span> <span class="n">POX</span> <span class="n">message</span><span class="o">.</span>
<span class="n">CRITIC</span> <span class="n">Error</span> <span class="k">while</span> <span class="n">receiving</span> <span class="n">messages</span> <span class="kn">from</span> <span class="nn">POX</span>
</pre></div>
</div>
<p>Try stopping chirouter, POX, and mininet, and then running this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">mn</span> <span class="o">-</span><span class="n">c</span>
</pre></div>
</div>
<p>This will reset Mininet to a clean configuration. Next, try re-running the POX, Mininet, and chirouter commands as usual.</p>
</div>
<div class="section" id="bytes">
<h2>29 bytes?<a class="headerlink" href="#bytes" title="Permalink to this headline">¶</a></h2>
<p>An ARP message is 28 bytes long, but you may observe that some of your <em>inbound</em> ARP messages are 29 bytes long. You can safely ignore this,
as long as you only process the first 28 bytes of the ARP message. Take into account that when you generate an ARP message,
you must make sure it&#8217;s 28 bytes long.</p>
</div>
<div class="section" id="unexpected-udp-packets-on-port-67">
<h2>Unexpected UDP packets on port 67<a class="headerlink" href="#unexpected-udp-packets-on-port-67" title="Permalink to this headline">¶</a></h2>
<p>If you are running Mininet on your own machine (as opposed to inside a VM), certain traffic from your machine can leak
into Mininet. Most notably, a Linux machine running Network Manager (as most Ubuntu distros do) will probably try to
send DHCP requests (on UDP port 67) to the network interfaces created by Mininet, and these will show up in your logs.
You can safely ignore them, but you may want to consider using our provided VM, which will provide a more controlled
environment on which to run Mininet.</p>
</div>
<div class="section" id="always-create-protocol-headers-from-scratch">
<h2>Always create protocol headers from scratch<a class="headerlink" href="#always-create-protocol-headers-from-scratch" title="Permalink to this headline">¶</a></h2>
<p>Whenever you are creating a protocol header, it is good practice to create it from scratch, instead of trying to reuse
an existing header. For example, suppose you receive an IP datagram that will cause an ICMP reply to be sent. You may
be tempted to take the IP header, make any necessary modifications in-place, and create a new payload. This is very
error-prone, specially if you do this at various points in your code. It is better to have a separate function
that will create a new protocol header, forcing you to think about the exact values you need to provide
in every field of the header, than to try to reuse existing headers.</p>
<p>Note: this does not apply to IP forwarding, where the existing IP header is kept largely intact, except for some
well-defined modifications.</p>
</div>
<div class="section" id="common-pitfalls">
<h2>Common Pitfalls<a class="headerlink" href="#common-pitfalls" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><strong>Computing a checksum over a pointer instead of what the pointer points to</strong>: Suppose you have the following variable:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">iphdr_t</span> <span class="o">*</span><span class="n">hdr</span><span class="p">;</span>
</pre></div>
</div>
<p>And that you have malloc&#8217;d and populated the values in the IP header. A common mistake is to call the <code class="docutils literal"><span class="pre">cksum</span></code> function like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cksum</span><span class="p">(</span><span class="n">hdr</span><span class="p">,</span> <span class="n">sizeof</span><span class="p">(</span><span class="n">hdr</span><span class="p">))</span>
</pre></div>
</div>
<p>This will compute a checksum over 4 or 8 bytes, because <code class="docutils literal"><span class="pre">hdr</span></code> is a pointer, and its size is 4 or 8 bytes. Make sure you pass the correct size to <code class="docutils literal"><span class="pre">cksum</span></code>. For an IP header, you would call <code class="docutils literal"><span class="pre">cksum</span></code> like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cksum</span><span class="p">(</span><span class="n">hdr</span><span class="p">,</span> <span class="n">sizeof</span><span class="p">(</span><span class="n">iphdr_t</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Computing ICMP header sizes</strong>: Related to the above, you cannot use <code class="docutils literal"><span class="pre">sizeof(icmp_packet_t)</span></code>, since <code class="docutils literal"><span class="pre">icmp_packet_t</span></code> is a <code class="docutils literal"><span class="pre">union</span></code> type,
and will likely yield an incorrect size. You should manually compute the size of your ICMP packet.</p>
</li>
<li><p class="first"><strong>Forgetting to use htons, htonl, etc.</strong>: Remember that the values in the protocol headers have to be in <em>network order</em>, and
you must use functions like htons and htonl to convert from host order to network order (and ntohs and ntohl to convert from
network order to host order)</p>
</li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2011-2017, The University of Chicago.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>